(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1267:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var r=t(5155),a=t(2115),l=t(2596),n=t(9688);function d(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,l.$)(s))}let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("flex flex-col space-y-1.5 p-6",t),...a})});c.displayName="CardHeader";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("text-sm text-muted-foreground",t),...a})});x.displayName="CardDescription";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("p-6 pt-0",t),...a})});m.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";var h=t(5863);let u=a.forwardRef((e,s)=>{let{className:t,value:a,...l}=e;return(0,r.jsx)(h.bL,{ref:s,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,r.jsx)(h.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});u.displayName=h.bL.displayName;var f=t(2085);let j=(0,f.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function N(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:d(j({variant:t}),s),...a})}function p(e){let{healthy:s,text:t}=e;return(0,r.jsx)(N,{variant:s?"default":"destructive",className:d(s?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600","text-white"),children:null!=t?t:s?"Healthy":"Unhealthy"})}var v=t(646),b=t(1243),y=t(3314),g=t(5487);function w(e){let{summary:s,serviceRunning:t,overallStatus:a,timestamp:l}=e,n=new Date(l).toLocaleString();return(0,r.jsxs)(i,{className:"mb-6",children:[(0,r.jsx)(c,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{className:"text-2xl",children:"Overall Service Status"}),(0,r.jsxs)(x,{children:["Last updated: ",n]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&"healthy"===a?(0,r.jsx)(v.A,{className:"h-8 w-8 text-green-500"}):(0,r.jsx)(b.A,{className:"h-8 w-8 text-red-500"}),(0,r.jsx)("span",{className:"text-xl font-semibold ".concat(t&&"healthy"===a?"text-green-500":"text-red-500"),children:t?a.charAt(0).toUpperCase()+a.slice(1):"Service Not Running"})]})]})}),(0,r.jsxs)(m,{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)(i,{children:[(0,r.jsx)(c,{className:"pb-2",children:(0,r.jsxs)(o,{className:"text-lg flex items-center",children:[(0,r.jsx)(y.A,{className:"mr-2 h-5 w-5"})," Model Health"]})}),(0,r.jsxs)(m,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s.model_health.healthy," / ",s.model_health.total," Healthy"]}),(0,r.jsx)(p,{healthy:1===s.model_health.ratio,text:"".concat((100*s.model_health.ratio).toFixed(0),"%")})]}),(0,r.jsx)(u,{value:100*s.model_health.ratio,className:"w-full"})]})]}),(0,r.jsxs)(i,{children:[(0,r.jsx)(c,{className:"pb-2",children:(0,r.jsxs)(o,{className:"text-lg flex items-center",children:[(0,r.jsx)(g.A,{className:"mr-2 h-5 w-5"})," Provider Health"]})}),(0,r.jsxs)(m,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s.provider_health.healthy," / ",s.provider_health.total," Healthy"]}),(0,r.jsx)(p,{healthy:1===s.provider_health.ratio,text:"".concat((100*s.provider_health.ratio).toFixed(0),"%")})]}),(0,r.jsx)(u,{value:100*s.provider_health.ratio,className:"w-full"})]})]})]})]})}var _=t(8208),k=t(6474);let R=_.bL,A=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(_.q7,{ref:s,className:d("border-b",t),...a})});A.displayName="AccordionItem";let C=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsx)(_.Y9,{className:"flex",children:(0,r.jsxs)(_.l9,{ref:s,className:d("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...l,children:[a,(0,r.jsx)(k.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});C.displayName=_.l9.displayName;let S=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsx)(_.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,r.jsx)("div",{className:d("pb-4 pt-0",t),children:a})})});S.displayName=_.UC.displayName;let H=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:d("w-full caption-bottom text-sm",t),...a})})});H.displayName="Table";let T=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:d("[&_tr]:border-b",t),...a})});T.displayName="TableHeader";let F=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:d("[&_tr:last-child]:border-0",t),...a})});F.displayName="TableBody",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let L=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});L.displayName="TableRow";let E=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});E.displayName="TableHead";let P=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});P.displayName="TableCell",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:d("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption";var D=t(4861),U=t(5339),B=t(4186);let O=e=>{let{healthy:s}=e;return s?(0,r.jsx)(v.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(D.A,{className:"h-4 w-4 text-red-500"})};function I(e){let{models:s}=e;return(0,r.jsxs)(i,{children:[(0,r.jsxs)(c,{children:[(0,r.jsxs)(o,{className:"text-xl flex items-center",children:[(0,r.jsx)(y.A,{className:"mr-2 h-6 w-6"})," Models Status"]}),(0,r.jsx)(x,{children:"Detailed status for each model and its backends."})]}),(0,r.jsx)(m,{children:(0,r.jsx)(R,{type:"single",collapsible:!0,className:"w-full",children:Object.entries(s).map(e=>{let[s,t]=e;return(0,r.jsxs)(A,{value:s,children:[(0,r.jsx)(C,{className:"hover:no-underline",children:(0,r.jsxs)("div",{className:"flex justify-between items-center w-full pr-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[1===t.health_ratio?(0,r.jsx)(v.A,{className:"h-5 w-5 text-green-500 mr-2"}):t.health_ratio>0?(0,r.jsx)(U.A,{className:"h-5 w-5 text-yellow-500 mr-2"}):(0,r.jsx)(D.A,{className:"h-5 w-5 text-red-500 mr-2"}),(0,r.jsx)("span",{className:"font-medium",children:t.name}),!t.enabled&&(0,r.jsx)(N,{variant:"outline",className:"ml-2 text-xs",children:"Disabled"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsxs)("span",{children:[t.healthy_backends,"/",t.total_backends," Healthy"]}),(0,r.jsx)(u,{value:100*t.health_ratio,className:"w-24 h-2"})]})]})}),(0,r.jsxs)(S,{children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mb-2",children:["Strategy: ",t.strategy]}),(0,r.jsxs)(H,{children:[(0,r.jsx)(T,{children:(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{children:"Backend Provider"}),(0,r.jsx)(E,{children:"Status"}),(0,r.jsx)(E,{children:"Latency"}),(0,r.jsx)(E,{children:"Failures"}),(0,r.jsx)(E,{children:"Priority"}),(0,r.jsx)(E,{children:"Weight"})]})}),(0,r.jsx)(F,{children:t.backends.map(e=>(0,r.jsxs)(L,{children:[(0,r.jsxs)(P,{className:"font-medium",children:[e.provider," ",(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.model.split(":").pop(),")"]})]}),(0,r.jsx)(P,{children:(0,r.jsx)(O,{healthy:e.healthy})}),(0,r.jsxs)(P,{className:"flex items-center",children:[(0,r.jsx)(B.A,{className:"h-3 w-3 mr-1 text-muted-foreground"})," ",e.latency_ms,"ms"]}),(0,r.jsx)(P,{children:e.failure_count}),(0,r.jsx)(P,{children:e.priority}),(0,r.jsx)(P,{children:e.weight})]},e.backend_key))})]})]})]},s)})})})]})}function M(e){let{providers:s}=e;return(0,r.jsxs)(i,{className:"mt-6",children:[(0,r.jsxs)(c,{children:[(0,r.jsxs)(o,{className:"text-xl flex items-center",children:[(0,r.jsx)(g.A,{className:"mr-2 h-6 w-6"})," Providers Status"]}),(0,r.jsx)(x,{children:"Health status for each provider."})]}),(0,r.jsx)(m,{children:(0,r.jsxs)(H,{children:[(0,r.jsx)(T,{children:(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{children:"Provider"}),(0,r.jsx)(E,{children:"Status"}),(0,r.jsx)(E,{children:"Healthy Models"}),(0,r.jsx)(E,{children:"Base URL"})]})}),(0,r.jsx)(F,{children:Object.entries(s).map(e=>{let[s,t]=e,a=t.total_models>0?t.healthy_models/t.total_models:0;return(0,r.jsxs)(L,{children:[(0,r.jsxs)(P,{className:"font-medium flex items-center",children:[t.healthy?(0,r.jsx)(v.A,{className:"h-5 w-5 text-green-500 mr-2"}):(0,r.jsx)(D.A,{className:"h-5 w-5 text-red-500 mr-2"}),t.name,!t.enabled&&(0,r.jsx)(N,{variant:"outline",className:"ml-2 text-xs",children:"Disabled"})]}),(0,r.jsx)(P,{children:(0,r.jsx)(p,{healthy:t.healthy})}),(0,r.jsx)(P,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{children:[t.healthy_models,"/",t.total_models]}),(0,r.jsx)(u,{value:100*a,className:"w-20 h-2"})]})}),(0,r.jsx)(P,{className:"text-xs text-muted-foreground",children:t.base_url})]},s)})})]})})]})}function q(e){let{backends:s}=e;return 0===s.length?null:(0,r.jsxs)(i,{className:"mt-6",children:[(0,r.jsxs)(c,{children:[(0,r.jsxs)(o,{className:"text-xl flex items-center text-red-600",children:[(0,r.jsx)(b.A,{className:"mr-2 h-6 w-6"})," Unhealthy Backends"]}),(0,r.jsx)(x,{children:"List of currently unhealthy backends requiring attention."})]}),(0,r.jsx)(m,{children:(0,r.jsxs)(H,{children:[(0,r.jsx)(T,{children:(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{children:"Backend Key"}),(0,r.jsx)(E,{children:"Failures"}),(0,r.jsx)(E,{children:"Last Failure (ago)"}),(0,r.jsx)(E,{children:"Recovery Attempts"})]})}),(0,r.jsx)(F,{children:s.map(e=>(0,r.jsxs)(L,{className:"bg-red-50 dark:bg-red-900/30",children:[(0,r.jsx)(P,{className:"font-medium",children:e.backend_key}),(0,r.jsx)(P,{children:e.failure_count}),(0,r.jsxs)(P,{children:[e.last_failure,"s ago"]}),(0,r.jsx)(P,{children:e.recovery_attempts})]},e.backend_key))})]})})]})}function V(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:d("animate-pulse rounded-md bg-muted",s),...t})}let K=(0,f.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Q=a.forwardRef((e,s)=>{let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:d(K({variant:a}),t),...l})});Q.displayName="Alert";let W=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:d("mb-1 font-medium leading-none tracking-tight",t),...a})});W.displayName="AlertTitle";let X=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:d("text-sm [&_p]:leading-relaxed",t),...a})});function Y(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0),[n,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{async function e(){l(!0),d(null);try{let e=await fetch("/health");if(!e.ok)throw Error("Failed to fetch health data: ".concat(e.statusText));let t=await e.json();s(t)}catch(e){e instanceof Error?d(e.message):d("An unknown error occurred"),console.error(e)}finally{l(!1)}}e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),t&&!e)?(0,r.jsxs)("div",{className:"container mx-auto p-4 md:p-8",children:[(0,r.jsx)(V,{className:"h-48 w-full mb-6"}),(0,r.jsx)(V,{className:"h-96 w-full mb-6"}),(0,r.jsx)(V,{className:"h-64 w-full"})]}):n?(0,r.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:(0,r.jsxs)(Q,{variant:"destructive",children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),(0,r.jsx)(W,{children:"Error"}),(0,r.jsx)(X,{children:n})]})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-muted/40",children:(0,r.jsxs)("div",{className:"container mx-auto p-4 md:p-8",children:[(0,r.jsx)(w,{summary:e.summary,serviceRunning:e.service_running,overallStatus:e.status,timestamp:e.timestamp}),(0,r.jsx)(I,{models:e.models}),(0,r.jsx)(M,{providers:e.providers}),(0,r.jsx)(q,{backends:e.unhealthy_backends})]})}):(0,r.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:(0,r.jsx)("p",{children:"No health data available."})})}X.displayName="AlertDescription"},4401:(e,s,t)=>{Promise.resolve().then(t.bind(t,1267))}},e=>{var s=s=>e(e.s=s);e.O(0,[588,441,684,358],()=>s(4401)),_N_E=e.O()}]);